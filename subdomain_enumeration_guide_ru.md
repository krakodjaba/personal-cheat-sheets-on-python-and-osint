```markdown subdomain_enumeration_guide_ru.md
# Руководство по перечислению субдоменов в Kali Linux

## Введение
Это руководство предоставляет комплексный подход к перечислению субдоменов с использованием трех мощных инструментов: Subfinder, Amass и FFUF. Каждый инструмент выполняет специфическую роль в процессе обнаружения - от пассивного сбора данных до активного перебора.

## Обзор инструментов

### 1. Subfinder
**Назначение**: Пассивное обнаружение субдоменов
**Описание**: Subfinder - это высокопроизводительный инструмент, который агрегирует результаты из нескольких публичных источников, включая SecurityTrails, Shodan, Censys и журналы Certificate Transparency.

**Основные возможности**:
- Быстрое пассивное перечисление
- Агрегация данных из 30+ источников
- Простой интерфейс командной строки

**Параметры команды**:
- `-d`: Указывает целевой домен
- `-o`: Файл для сохранения результатов
- `-silent`: Отключает вывод в консоль
- `-v`: Включает подробный вывод

**Пример команды**:
```bash
subfinder -d example.com -o results.txt
```

### 2. Amass
**Назначение**: Комплексное пассивное/активное перечисление
**Описание**: Amass - это мощная платформа для картирования сети, которая сочетает пассивный анализ с активным перебором DNS и построением графов связей.

**Основные возможности**:
- Пассивное и активное перечисление
- Возможности перебора DNS
- Построение графов связей между доменами
- Анализ исторических данных

**Параметры команды**:
- `enum`: Режим перечисления
- `-d`: Целевой домен
- `-o`: Файл вывода
- `-brute`: Включает активный перебор
- `-w`: Путь к словарю для перебора

**Пример команды**:
```bash
amass enum -d example.com -o amass_results.txt
```

### 3. FFUF
**Назначение**: Активный перебор DNS
**Описание**: FFUF - это универсальный инструмент для фаззинга, который может использоваться для перебора DNS с целью обнаружения субдоменов, не найденных пассивными методами.

**Основные возможности**:
- Высокоскоростной перебор
- Настраиваемые словари
- Множество форматов вывода
- Возможности фильтрации

**Параметры команды**:
- `-u`: URL для фаззинга (FUZZ - заполнитель)
- `-w`: Путь к словарю
- `-o`: Файл вывода
- `-t`: Количество потоков
- `-mc`: Коды статусов для фильтрации

**Пример команды**:
```bash
ffuf -u https://FUZZ.example.com -w subdomains.txt -t 50 -mc 200
```

### 4. Wappalyzer (Дополнительно)
**Назначение**: Идентификация технологий веб-сайтов
**Описание**: Wappalyzer - это инструмент для определения технологий, используемых на веб-сайтах, включая CMS, фреймворки, серверы и другие компоненты.

**Основные возможности**:
- Обнаружение более 1000 технологий
- Работа с отдельными URL или списками
- Вывод в различных форматах

**Параметры команды**:
- `-u`: URL для анализа
- `-l`: Файл со списком URL
- `-o`: Формат вывода (json, csv, etc.)
- `-r`: Рекурсивный анализ

**Пример команды**:
```bash
wappalyzer https://example.com
```

## Пошаговый процесс перечисления

### Шаг 1: Пассивное перечисление с Subfinder
1. Откройте терминал в Kali Linux
2. Запустите Subfinder с целевым доменом:
   ```bash
   subfinder -d example.com -o subfinder_results.txt
   ```
3. Просмотрите результаты в файле `subfinder_results.txt`

### Шаг 2: Комплексное перечисление с Amass
1. Запустите перечисление Amass:
   ```bash
   amass enum -d example.com -o amass_results.txt
   ```
2. Для более тщательных результатов включите активный перебор:
   ```bash
   amass enum -d example.com -brute -w /usr/share/wordlists/subdomains-top1million-5000.txt -o amass_full_results.txt
   ```

### Шаг 3: Активный перебор с FFUF
1. Подготовьте словарь субдоменов (или используйте встроенные)
2. Запустите FFUF:
   ```bash
   ffuf -u https://FUZZ.example.com -w /usr/share/wordlists/dirb/common.txt -o ffuf_results.json -t 100
   ```
3. Просмотрите JSON вывод для обнаруженных субдоменов

### Шаг 4: Проверка DNS записей
1. Используйте Python скрипт для проверки DNS записей:
   ```python
   import dns.resolver
   domain = "example.com"
   for record in ["A", "MX", "NS", "TXT", "CNAME"]:
       try:
           answers = dns.resolver.resolve(domain, record)
           print(f"{record}: {[str(r) for r in answers]}")
       except Exception:
           pass
   ```

### Шаг 5: Проверка Certificate Transparency
1. Запрос к crt.sh для исторических сертификатов:
   ```python
   import requests
   domain = "example.com"
   url = f"https://crt.sh/?q={domain}&output=json"
   data = requests.get(url).json()
   for entry in data:
       print(entry.get("common_name"), entry.get("name_value"))
   ```

### Шаг 6: Идентификация технологий с Wappalyzer
1. Установите Wappalyzer (если не установлен):
   ```bash
   sudo apt install wappalyzer
   ```
2. Проанализируйте обнаруженные субдомены:
   ```bash
   for domain in $(cat all_subdomains.txt); do
       wappalyzer https://$domain -o json >> tech_stack.json
   done
   ```

## Лучшие практики
1. Всегда начинайте с пассивного перечисления перед активными методами
2. Комбинируйте результаты из нескольких инструментов для комплексного покрытия
3. Используйте разные словари для перебора, чтобы максимизировать находки
4. Проверяйте все обнаруженные субдомены с помощью DNS запросов
5. Документируйте все находки для отчетности

## Устранение неполадок
- Если инструменты не найдены, установите их:
  ```bash
  sudo apt install subfinder amass ffuf wappalyzer
  ```
- Для Python скриптов убедитесь, что установлены необходимые библиотеки:
  ```bash
  pip install dnspython requests
  ```
- Если достигнуты лимиты API, рассмотрите возможность использования API ключей, где это доступно

## Заключение
Этот многоинструментальный подход обеспечивает тщательный метод перечисления субдоменов, сочетая пассивный сбор данных с активными методами верификации. Комбинация Subfinder, Amass и FFUF охватывает большинство сценариев обнаружения, в то время как дополнительные проверки DNS и сертификатов помогают верифицировать находки. Wappalyzer добавляет ценную информацию о технологическом стеке обнаруженных субдоменов.
```
